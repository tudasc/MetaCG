# CGPatch

CGPatch uses targeted instrumentation to generate dynamic patch-graphs to patch static call-graphs generated by **CGCollector**.

This project is based on the following paper:

> Sebastian Kreutzer, Silas Martens, Peter Arzt, Tim Heldmann, and Christian Bischof.  
> **CGPatch: Streamlining Static Call Graph Validation Using Selective Instrumentation**.  
> Scientific Computing, Technische Universit√§t Darmstadt, Darmstadt, Germany

## Components

### LLVM Pass (cgpatch-inst-pass.cpp)
- Performs targeted instrumentation
- Runs as first pass in the pass pipeline
- Instruments indirect calls with a call to the cgpatch runtime function
- Use `instrument-ctors-dtors` option to additionally instrument constructor and destructor calls.

### Runtime (cgpatch-inst-runtime.cpp)
Resolves address of call target using `SymbolRetriever` -
Builds patch-graph using graph lib.

### Usage
Use `patchcc` and `patchcxx` wrappers to use cgpatch.

```
patchcc/cxx [options] clang++ file.c/cpp
```

